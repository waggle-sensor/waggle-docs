<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-about/architecture">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.1">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="Waggle Docs RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="Waggle Docs Atom Feed">



<link rel="search" type="application/opensearchdescription+xml" title="Waggle Docs" href="/opensearch.xml"><title data-rh="true">Architecture | Waggle Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://docs.waggle-edge.ai/docs/about/architecture"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Architecture | Waggle Docs"><meta data-rh="true" name="description" content="The Waggle cyberinfrastructure consists of coordinating hardware and software services enabling AI at the edge. Below is a quick summary of the different infrastructure pieces, starting at the highest-level and zooming into each component to understand the relationships and role each plays."><meta data-rh="true" property="og:description" content="The Waggle cyberinfrastructure consists of coordinating hardware and software services enabling AI at the edge. Below is a quick summary of the different infrastructure pieces, starting at the highest-level and zooming into each component to understand the relationships and role each plays."><link data-rh="true" rel="icon" href="/img/sage-favicon.png"><link data-rh="true" rel="canonical" href="https://docs.waggle-edge.ai/docs/about/architecture"><link data-rh="true" rel="alternate" href="https://docs.waggle-edge.ai/docs/about/architecture" hreflang="en"><link data-rh="true" rel="alternate" href="https://docs.waggle-edge.ai/docs/about/architecture" hreflang="x-default"><link data-rh="true" rel="preconnect" href="https://MPDJQF6T11-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.9c4a605e.css">
<link rel="preload" href="/assets/js/runtime~main.01fe7705.js" as="script">
<link rel="preload" href="/assets/js/main.e530e960.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_fXgn">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">Waggle</b></a><a class="navbar__item navbar__link" href="/docs/about/overview">About</a><a class="navbar__item navbar__link" href="/docs/tutorials/accessing-data">Tutorials</a><a href="https://portal.sagecontinuum.org" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">Sage Portal</a></div><div class="navbar__items navbar__items--right"><div class="searchBox_ZlJk"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper mainWrapper_z2l0 docsWrapper_BCFX"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docPage__5DB"><aside class="theme-doc-sidebar-container docSidebarContainer_b6E3"><div class="sidebar_njMd"><nav class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" aria-expanded="true" href="/docs/category/about">About</a><button aria-label="Toggle the collapsible sidebar category &#x27;About&#x27;" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/docs/about/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/docs/about/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-2 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" tabindex="0" href="/docs/category/resources">Resources</a><button aria-label="Toggle the collapsible sidebar category &#x27;Resources&#x27;" type="button" class="clean-btn menu__caret"></button></div></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/tutorials">Tutorials</a><button aria-label="Toggle the collapsible sidebar category &#x27;Tutorials&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" aria-expanded="false" href="/docs/category/reference-guides">Reference guides</a><button aria-label="Toggle the collapsible sidebar category &#x27;Reference guides&#x27;" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/contact-us">Contact us</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_PEFL"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_kv0_"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_gTbr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_OVgt"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="/docs/category/about"><span itemprop="name">About</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Architecture</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><h1>Architecture</h1><p>The Waggle cyberinfrastructure consists of coordinating hardware and software services enabling AI at the edge. Below is a quick summary of the different infrastructure pieces, starting at the highest-level and zooming into each component to understand the relationships and role each plays.</p><h2 class="anchor anchorWithStickyNavbar_LWe7" id="high-level-infrastructure">High-Level Infrastructure<a class="hash-link" href="#high-level-infrastructure" title="Direct link to heading">​</a></h2><p><img loading="lazy" alt="Figure 1: High-level Node &amp;amp; Beehive Relationship" src="/assets/images/arch_high_01-770507cc9c88a2a5ec6125510fb8e527.svg" width="529" height="423" class="img_ev3q"></p><p>There are 2 main components of the Waggle cyberinfrastructure:</p><ul><li>the <a href="#waggle-nodes">Waggle Nodes</a> that exist at the edge</li><li>the Waggle Cloud that hosts services and storage systems to facilitate running <a href="#science-goals">“science goals”</a> @ the edge</li></ul><p>Every edge node maintains connections to 2 core Waggle Cloud components: 1 to a <a href="#beehive">Beehive</a> and 1 to a <a href="#beekeper">Beekeeper</a></p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beekeeper">Beekeeper<a class="hash-link" href="#beekeeper" title="Direct link to heading">​</a></h3><p>The Beekeeper is an administrative server that allows system administrators to perform actions on the nodes such as gather health metrics, and perform software updates.  All Waggle nodes &quot;phone home&quot; to their Beekeeper and maintain this &quot;life-line&quot; connection.</p><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/beekeeper" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/beekeeper</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="beehive">Beehive<a class="hash-link" href="#beehive" title="Direct link to heading">​</a></h3><p>The Waggle node &lt;-&gt; Beehive connection is the pipeline for the science. It is over this connection that instructions for the node will be sent, in addition to how data is published into the Beehive storage systems from <a href="#science-goals">“science goals”</a> <a href="#what-is-a-plugin">plugins</a> running on the nodes.</p><p>The overall Waggle infrastructure supports multiple Beehives, where each Waggle nodes is associated with a single Beehive. The set of nodes associated with a Beehive creates a &quot;project&quot; where each &quot;project&quot; is separate, having its own data store, web services, etc.</p><p><img loading="lazy" alt="Figure 2: Multiple Beehives" src="/assets/images/arch_beehives_01-b8018d2fcb011afe51840fc080dac4dc.svg" width="598" height="432" class="img_ev3q"></p><p>In the example above, there are 2 Waggle nodes associated with Beehive 1, while a single Waggle node is associated with Beehive 2.  With all Waggle nodes, in this example, being administered by a single <a href="#beekeeper">Beekeeper</a>.</p><blockquote><p><em>Note</em>: the example above shows a single Beekeeper, but a second Beekeeper could have been used for administrative isolation.</p></blockquote><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/waggle-beehive-v2" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/waggle-beehive-v2</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="beehive-infrastructure">Beehive Infrastructure<a class="hash-link" href="#beehive-infrastructure" title="Direct link to heading">​</a></h2><p>Looking deeper into the Waggle Beehive infrastructure, it contains 2 main components:</p><ul><li>software services such as the <a href="#edge-scheduler-es">Edge Scheduler (ES)</a>, <a href="#lambda-triggers-lt">Lambda Triggers (LT)</a>, data APIs, and website hosting</li><li>data storage systems such as the <a href="#data-repository-dr">Data Repository (DR)</a> and the <a href="#edge-code-repository-ecr">Edge Code Repository (ECR)</a></li></ul><p><img loading="lazy" alt="Figure 3: Beehive High-level Architecture" src="/assets/images/beehive_high_01-22e4d3a5822b0072fe6573674d3c109e.svg" width="521" height="462" class="img_ev3q"></p><p>The Beehive is the “command center” for interacting with the Waggle nodes at the edge. Hosting websites and interfaces allowing scientists to create <a href="#science-goals">“science goals”</a> to run <a href="#what-is-a-plugins">plugins</a> at the edge &amp; browse the data produced by those <a href="#what-is-a-plugin">plugins</a>.</p><p><img loading="lazy" alt="Figure 4: Beehive Infrastructure Details" src="/assets/images/beehive_details_01-17afa73f2d666b43d21ba820c0423888.svg" width="898" height="482" class="img_ev3q"></p><p>The software services and data storage systems are deployed within a <a href="https://kubernetes.io/" target="_blank" rel="noopener noreferrer">kubernetes</a> environment to allow for easy administration and to support running in a multiple server architecture, supporting redundancy and service replication.</p><p>While the services running within Beehive are many (both graphical and <a href="https://en.wikipedia.org/wiki/Representational_state_transfer" target="_blank" rel="noopener noreferrer">REST</a> style API interfaces), the following is an outline of the most vital.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="data-repository-dr">Data Repository (DR)<a class="hash-link" href="#data-repository-dr" title="Direct link to heading">​</a></h3><p>The Data Repository is the data store for housing all the edge produced <a href="#what-is-a-plugin">plugin</a> data. It consists of different storage technologies (i.e. <a href="https://www.influxdata.com/" target="_blank" rel="noopener noreferrer">influxdb</a>) and techniques to store simple textual data (i.e. key-value pairs) in addition to large blobular data (i.e. audio, images, video). The Data Repository additionally has an API interface for easy access to this data.</p><p>The data store is a time-series database of key-value pairs with each entry containing metadata about how and when the data originated @ the edge. Included in this metadata is the data collection timestamp, <a href="#what-is-a-plugin">plugin</a> version used to collect the data, the <a href="#waggle-nodes">Waggle node</a> the <a href="#what-is-a-plugin">plugin</a> was run on, and the specific compute unit within the node that the <a href="#what-is-a-plugin">plugin</a> was running on.</p><div class="language-json codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-json codeBlock_bY9V thin-scrollbar"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;timestamp&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;2022-06-10T22:37:47.369013647Z&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;name&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;iio.in_temp_input&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;value&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token number" style="color:#36acaa">25050</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;meta&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;host&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;0000dca632ed6d06.ws-rpi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;job&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;sage&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;node&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;000048b02d35a97c&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;plugin&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;plugin-iio:0.6.0&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;sensor&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;bme680&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;task&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;iio-rpi&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token property" style="color:#36acaa">&quot;vsn&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&quot;W08C&quot;</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg class="copyButtonIcon_y97N" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_LjdS" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div><p>In the above example, the value of <code>25050</code> was collected @ <code>2022-06-10T22:37:47.369013647Z</code> from the <code>bme680</code> sensor on node <code>000048b02d35a97c</code> via the <code>plugin-iio:0.6.0</code> <a href="#what-is-a-plugin">plugin</a>.</p><blockquote><p><em>Note</em>: see the <a href="https://docs.waggle-edge.ai/docs/tutorials/accessing-data" target="_blank" rel="noopener noreferrer">Access and use data</a> site for more details and data access examples.</p></blockquote><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/data-repository" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/data-repository</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="edge-scheduler-es">Edge Scheduler (ES)<a class="hash-link" href="#edge-scheduler-es" title="Direct link to heading">​</a></h3><p>The Edge Scheduler is defined as the suite of services running in Beehive that facilitate running <a href="#what-is-a-plugin">plugins</a> @ the edge. Included here are user interfaces and APIs for scientists to create and manage their <a href="#science-goals">“science goals”</a>. The Edge Scheduler continously analyzes node workloads against all the <a href="#science-goals">“science goals”</a> to determine how the <a href="#science-goals">“science goals”</a> are deployed to the Beehive nodes. When it is determined that a node&#x27;s <a href="#science-goals">“science goals”</a> are to be updated, the Edge Scheduler interfaces with <a href="#waggle-edge-stack-wes">WES</a> running on those nodes to update the node&#x27;s local copy of the <a href="#science-goals">“science goals”</a>. Essentially, the Edge Scheduler is the overseer of all the Beehive&#x27;s nodes, deploying <a href="#science-goals">“science goals”</a> to them to meet the scientists <a href="#what-is-a-plugin">plugin</a> execution objectives.</p><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/edge-scheduler" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/edge-scheduler</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="edge-code-repository-ecr">Edge Code Repository (ECR)<a class="hash-link" href="#edge-code-repository-ecr" title="Direct link to heading">​</a></h3><p>The Edge Code Repository is the &quot;app store&quot; that hosts all the tested and benchmarked edge <a href="#what-is-a-plugin">plugins</a> that can be deployed to the nodes. This is the interface allowing users to discover existing <a href="#what-is-a-plugin">plugins</a> (for potential inclusion in their <a href="#science-goals">“science goals”</a>) in addition to submitting their own. At it&#x27;s core, the ECR provides a verified and versioned repository of <a href="#what-is-a-plugin">plugin</a> <a href="https://www.docker.com" target="_blank" rel="noopener noreferrer">Docker</a> images that are pulled by the nodes when a <a href="#what-is-a-plugin">plugin</a> is to be downloaded as run-time component of a <a href="#science-goals">“science goal”</a>.</p><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/edge-code-repository" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/edge-code-repository</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="lambda-triggers-lt">Lambda Triggers (LT)<a class="hash-link" href="#lambda-triggers-lt" title="Direct link to heading">​</a></h3><p>The Lambda Triggers service provides a framework for running reactive code within the Beehive. There are two kinds of reaction triggers considered here: From-Edge and To-Edge.</p><p>From-Edge triggers, or messages that originate from an edge node, can be used to trigger lambda functions -- for example, if high wind velocity is detected, a function could be triggered to determine how to reconfigure sensors or launch a computation or send an alert.</p><p>To-Edge triggers are messages that are to change a node&#x27;s behavior. For example an HPC calculation or cloud-based data analysis could trigger an <a href="#edge-scheduler-es">Edge Scheduler</a> API call to request a <a href="#science-goals">“science goal”</a> to be run on a particular set of edge nodes.</p><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/lambda-triggers" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/lambda-triggers</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="waggle-nodes">Waggle Nodes<a class="hash-link" href="#waggle-nodes" title="Direct link to heading">​</a></h2><p>The Waggle nodes are the edge computing component of the cyberinfrastructure. All Waggle nodes consist of 3 items:</p><ol><li><strong>Persisent storage</strong> for housing downloaded <a href="#what-is-a-plugin">plugins</a> and caching published data before it is transferred to the node&#x27;s Beehive</li><li><strong>CPU and GPU compute modules</strong> where <a href="#what-is-a-plugin">plugins</a> are executed and perform the accelerated inferences</li><li><strong>Sensors</strong> such as environment sensors, cameras and <a href="https://en.wikipedia.org/wiki/Lidar" target="_blank" rel="noopener noreferrer">LiDAR systems</a></li></ol><p><img loading="lazy" alt="Figure 5: Waggle Node Overview" src="/assets/images/node_overview_01-98f28b1ff8c7610992042d1d2c719127.svg" width="528" height="335" class="img_ev3q"></p><p>Waggle nodes enable @ the edge fast computation, leveraging the large non-volatile storage to handle caching of high frequency data (including images, audio and video) in the event the node is &quot;offline&quot; from its Beehive.  Through expansion ports the nodes support the adding and removing of sensors to fully customize the node deployments for the particular deployment environment.</p><p>Overall, even though the nodes may use different CPU architectures and different sensor configurations, they all leverage the same <a href="#waggle-edge-stack-wes">Waggle Edge Stack (WES)</a> to run <a href="#what-is-a-plugin">plugins</a>.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="wild-waggle-node">Wild Waggle Node<a class="hash-link" href="#wild-waggle-node" title="Direct link to heading">​</a></h3><p>The Wild Waggle Node is a custom built weather-proof enclosure intended for remote outdoor installation. The node features software and hardware resilience via the <a href="https://github.com/waggle-sensor/wildnode-image" target="_blank" rel="noopener noreferrer">custom Waggle operating system</a> and <a href="https://github.com/waggle-sensor/wagman" target="_blank" rel="noopener noreferrer">custom Wagman circuit board</a>. Internal to the node is a power supply and PoE network switch supporting the addition of sensors through standard Ethernet (PoE), USB and other embedded protocols via the node expansion ports.</p><p><img loading="lazy" alt="Figure 6: Wild Waggle Node Overview" src="/assets/images/node_wild_01-addd18fb19d07c36aaec6ffe2187a064.svg" width="515" height="401" class="img_ev3q"></p><p>The technical capabilities of the Wild Waggle Node consists of:</p><ul><li>NVidia Xavier NX ARM64 <a href="https://github.com/waggle-sensor/nodecontroller" target="_blank" rel="noopener noreferrer">Node Controller</a> w/ 8GB of shared CPU/GPU RAM</li><li>1 TB of NVMe storage</li><li>4x PoE expansion ports</li><li>1x USB2 expansion port</li><li>optional <a href="https://en.wikipedia.org/wiki/Stevenson_screen" target="_blank" rel="noopener noreferrer">Stevenson Shield</a> housing a RPi 4 w/ environmental sensors &amp; microphone</li><li>optional 2nd NVidia Xavier NX ARM64 <a href="https://github.com/waggle-sensor/edgeprocessor" target="_blank" rel="noopener noreferrer">Edge Processor</a></li></ul><blockquote><p>Manual: <a href="https://docs.waggle-edge.ai/docs/about/resources/wsn-manual" target="_blank" rel="noopener noreferrer">https://docs.waggle-edge.ai/docs/about/resources/wsn-manual</a></p></blockquote><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/wild-waggle-node" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/wild-waggle-node</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="waggle-blade-node">Waggle Blade Node<a class="hash-link" href="#waggle-blade-node" title="Direct link to heading">​</a></h3><p>The Waggle Blade Node is a standard commercially available server intended for us in a climate controlled machine room, or extended temperature range telecom-grade blades for harsher environments. The <a href="https://github.com/waggle-sensor/blade-image" target="_blank" rel="noopener noreferrer">AMD64 based Waggle operating system</a> supports these types of nodes, enabling the services needed to support <a href="#waggle-edge-stack-wes">WES</a>.</p><p><img loading="lazy" alt="Figure 7: Waggle Blade Node Overview" src="/assets/images/node_blade_01-60cda8bc9c4d201ab4ee6876b4f4c67c.svg" width="517" height="390" class="img_ev3q"></p><p>The above diagram shows the basic technical configuration of a Waggle Blade Node:</p><ul><li>Multi-core ARM64</li><li>32GB of RAM</li><li>Dedicated NVida T4 GPU</li><li>1 TB of SSD storage</li></ul><blockquote><p><em>Note</em>: it is possible to add the same optional <a href="https://en.wikipedia.org/wiki/Stevenson_screen" target="_blank" rel="noopener noreferrer">Stevenson Shield</a> housing that is available to the <a href="#wild-waggle-node">Wild Waggle Nodes</a></p></blockquote><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/waggle-blade" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/waggle-blade</a></p></blockquote><h2 class="anchor anchorWithStickyNavbar_LWe7" id="running-plugins--the-edge">Running plugins @ the Edge<a class="hash-link" href="#running-plugins--the-edge" title="Direct link to heading">​</a></h2><p>Included in the Waggle operating systems are the core components necessary to enable running <a href="#what-is-a-plugin">plugins</a> @ the edge.  At the heart of this is <a href="https://k3s.io/" target="_blank" rel="noopener noreferrer">k3s</a>, which creates a protected &amp; isolated run-time environment. This environment combined with the tools and services provided by <a href="#waggle-edge-stack-wes">WES</a> enable <a href="#what-is-a-plugin">plugin</a> access to the node&#x27;s CPU, GPU, sensors and cameras.</p><h3 class="anchor anchorWithStickyNavbar_LWe7" id="waggle-edge-stack-wes">Waggle Edge Stack (WES)<a class="hash-link" href="#waggle-edge-stack-wes" title="Direct link to heading">​</a></h3><p>The Waggle Edge Stack is the set of core services running within the <a href="#waggle-nodes">Waggle node&#x27;s</a> <a href="https://k3s.io/" target="_blank" rel="noopener noreferrer">k3s</a> run-time environment that supports all the features that <a href="#what-is-a-plugin">plugins</a> need to run on the Waggle nodes. The WES services coordinate with the core <a href="#beehive">Beehive</a> services to download &amp; run scheduled <a href="#what-is-a-plugin">plugins</a> (including load balancing) and facilitate uploading <a href="#what-is-a-plugin">plugin</a> published data to the Beehive <a href="#data-repository-dr">data repository</a>. Through abstraction technologies and WES provided tools, <a href="#what-is-a-plugin">plugins</a> have access to sensor and camera data.</p><p><img loading="lazy" alt="Figure 8: Waggle Edge Stack Overview" src="/assets/images/wes_overview_01-9559b1c3f53314fa18388e193870a589.svg" width="636" height="539" class="img_ev3q"></p><p>The above diagram demonstrates 2 <a href="#what-is-a-plugin">plugins</a> running on a Waggle node.  Plugin 1 (&quot;neon-kafka&quot;) is an example <a href="#what-is-a-plugin">plugin</a> that is running alongside Plugin 2 (&quot;data-smooth&quot;). In this example, &quot;neon-kafka&quot; (via the WES tools) is reading metrics from the node&#x27;s sensors and then publishing that data within the WES run-time environment (internal to the node).
At the same time, the &quot;data-smooth&quot; <a href="#what-is-a-plugin">plugin</a> is subscribing to this data stream, performing some sort of inference and then publishing the inference results (via WES tools) to Beehive.</p><blockquote><p><em>Note</em>: see the <a href="https://docs.waggle-edge.ai/docs/category/edge-apps" target="_blank" rel="noopener noreferrer">Edge apps</a> guide on how to create a Waggle <a href="#what-is-a-plugin">plugin</a>.</p></blockquote><blockquote><p>Details &amp; source code: <a href="https://github.com/waggle-sensor/waggle-edge-stack" target="_blank" rel="noopener noreferrer">https://github.com/waggle-sensor/waggle-edge-stack</a></p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-plugin">What is a plugin<a class="hash-link" href="#what-is-a-plugin" title="Direct link to heading">​</a></h3><p>Plugins are the user developed module that the Waggle cyberinfrastructure is designed around. At it&#x27;s simplest definition a &quot;plugin&quot; is code that runs @ the edge to perform some task. That task may be simply collecting sample camera images or a complex inference combining sensor data and results published from other plugins. A plugin&#x27;s code will interface with the edge node&#x27;s sensor(s) and then publish resulting data via the tools provided by <a href="#waggle-edge-stack-wes">WES</a>. All developed plugins are hosted by the Beehive <a href="#edge-code-repository-ecr">Edge Code Repository</a>.</p><blockquote><p>See <a href="https://docs.waggle-edge.ai/docs/category/edge-apps" target="_blank" rel="noopener noreferrer">how to create plugins</a> for details.</p></blockquote><h3 class="anchor anchorWithStickyNavbar_LWe7" id="science-goals">Science Goals<a class="hash-link" href="#science-goals" title="Direct link to heading">​</a></h3><p>A &quot;science goal&quot; is a rule-set for how and when <a href="#what-is-a-plugin">plugins</a> are run on edge nodes. These &quot;science goals&quot; are created by scientist to accomplish a science objective through the execution of <a href="#what-is-a-plugin">plugins</a> in a specific manner. Goals are created, in a human language, and managed within the Beehive <a href="#edge-scheduler-es">Edge Scheduler</a>. It is then the cyberinfrastucture responsibility to deploy the &quot;science goals&quot; to the edge nodes and execute the goal&#x27;s <a href="#what-is-a-plugins">plugins</a>. The <a href="/docs/tutorials/schedule-jobs">tutorial</a> walks through running a science goal.</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/waggle-sensor/waggle-docs/edit/main/docs/about/architecture.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_vwxv"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/about/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Overview</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/category/resources"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">Resources</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#high-level-infrastructure" class="table-of-contents__link toc-highlight">High-Level Infrastructure</a><ul><li><a href="#beekeeper" class="table-of-contents__link toc-highlight">Beekeeper</a></li><li><a href="#beehive" class="table-of-contents__link toc-highlight">Beehive</a></li></ul></li><li><a href="#beehive-infrastructure" class="table-of-contents__link toc-highlight">Beehive Infrastructure</a><ul><li><a href="#data-repository-dr" class="table-of-contents__link toc-highlight">Data Repository (DR)</a></li><li><a href="#edge-scheduler-es" class="table-of-contents__link toc-highlight">Edge Scheduler (ES)</a></li><li><a href="#edge-code-repository-ecr" class="table-of-contents__link toc-highlight">Edge Code Repository (ECR)</a></li><li><a href="#lambda-triggers-lt" class="table-of-contents__link toc-highlight">Lambda Triggers (LT)</a></li></ul></li><li><a href="#waggle-nodes" class="table-of-contents__link toc-highlight">Waggle Nodes</a><ul><li><a href="#wild-waggle-node" class="table-of-contents__link toc-highlight">Wild Waggle Node</a></li><li><a href="#waggle-blade-node" class="table-of-contents__link toc-highlight">Waggle Blade Node</a></li></ul></li><li><a href="#running-plugins--the-edge" class="table-of-contents__link toc-highlight">Running plugins @ the Edge</a><ul><li><a href="#waggle-edge-stack-wes" class="table-of-contents__link toc-highlight">Waggle Edge Stack (WES)</a></li><li><a href="#what-is-a-plugin" class="table-of-contents__link toc-highlight">What is a plugin</a></li><li><a href="#science-goals" class="table-of-contents__link toc-highlight">Science Goals</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="/docs/about/overview">About</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/category/tutorials">Tutorials</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/contact-us">Get Support</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2022 Waggle</div></div></div></footer></div>
<script src="/assets/js/runtime~main.01fe7705.js"></script>
<script src="/assets/js/main.e530e960.js"></script>
</body>
</html>